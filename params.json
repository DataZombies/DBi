{"tagline":"WebSQL database initialization, database schema tool and storage management","google":"","body":"# DataZombie's DBi v0.2\r\n(pronounced Debi)\r\n\r\n__DBi handles all the work of creating an iOS or Safari WebSQL database and manages local/session storages.__\r\n\r\nDBi creates, tables, indices, triggers & views and populates the tables all from a single JSON file that's outputted from DBi.\r\n\r\n[Google Group](https://groups.google.com/group/datazombies-dbi)\r\n\r\nIf you find that DBi has been a benefit to you project please donate to the cause via PayPal (http://tinyurl.com/2fpmx27). Any amount is appreciated.\r\n\r\n## Step 1 - Include the Script Tag in Your HTML5 Markup\r\n\r\n``` html\r\n<script src=\"./DBi.js\"></script>\r\n```\r\n\r\n## Step 2 - Define the Database Schema\r\nAll DBi JSON schema files has one required object, database, one optional object, storage, and two optional properties, generationTimeStamp and userAgent. generationTimeStamp and userAgent are generated during schema output.\r\n\r\n``` js\r\n{\"generationTimeStamp\":\"\",\r\n \"userAgent\":\"\",\r\n \"storage\": {},\r\n \"database\": {}\r\n}\r\n```\r\n\r\nThe database object is subdivided into five required attributes that define the database: shortName, version, longName, maxSize. The only required array is tables. The optional arrays define the database's indices, triggers, views and upgrades. Upgrades will be implemented in a future release.\r\n\r\n``` js\r\n  \"database\":\r\n    {\"shortName\":\"\",\r\n     \"version\":\"\",\r\n     \"longName\":\"\",\r\n     \"maxSize\":\"\",\r\n     \"tables\":[],\r\n     \"indices\":[],\r\n     \"triggers\":[],\r\n     \"views\":[],\r\n     \"upgrades\":[]\r\n  }\r\n```\r\n\r\nThe minimum you need to get started is the required database information. All other development and modifications can be done in the web browser's database interface (Safari Web Inspector) and outputted for implementation. More on output later.\r\n\r\nThe minimum JSON schema would look like this:\r\n\r\n``` js\r\n  {\"database\":\r\n    {\"shortName\":\"dbCT\",\r\n     \"version\":\"1.0\",\r\n     \"longName\":\"Chess Tournament Database\",\r\n     \"maxSize\":\"1048576\"}}\r\n```\r\nDatabase information with one table:\r\n\r\n``` js\r\n  {\"database\":\r\n    {\"shortName\":\"dbCT\",\r\n     \"version\":\"1.0\",\r\n     \"longName\":\"Chess Tournament Database\",\r\n     \"maxSize\":\"1048576\"},\r\n     \"tables\":[\r\n        {\"name\":\"Games\",\r\n         \"sql\":\"CREATE TABLE Games (id INTEGER PRIMARY KEY AUTOINCREMENT,gamename TEXT,weight REAL DEFAULT .10 CHECK (weight<=1));\"},\r\n        {\"name\":\"Players\",\r\n         \"columns\":\r\n            {\"id\":\"INTEGER PRIMARY KEY AUTOINCREMENT\",\r\n             \"fname\":\"TEXT NOT NULL\",\r\n             \"lname\":\"TEXT NOT NULL\"},\r\n         \"records\":[\r\n            {\"id\":1, \"fname\":\"Bobby\", \"lname\":\"Fisher\"},\r\n            {\"id\":2, \"fname\":\"Bart\", \"lname\":\"Simpsen\"},\r\n            {\"id\":3, \"fname\":\"Garry\", \"lname\":\"Kasparov\"}]}]\r\n```\r\n\r\nYou can see that tables can be created by either putting the DDL in the sql attribute (the Games table) or define each column (the Players table). See the schema files in this repo for more examples.\r\n\r\n## Step 3 - Creating the Database\r\nIn your JavaScript code initialize your database variable.\r\n\r\n``` js\r\ndbWebApp = new DBi({\r\n  debug: true,\r\n  jsonAsynchronous: false,\r\n  reset: false,\r\n  schemaFile: './schema_1stRun/schema.json'\r\n});\r\n```\r\n\r\n__debug__: verbose and helpful messages sent to the console. _Optional. Default false_\r\n\r\n__jsonAsynchronous__: load the JSON schema file asynchronously. _Optional. Default false_\r\n\r\n__reset__: delete all storages and dump all database objects; a fresh start. _Optional. Default false_\r\n\r\n__schemaFile__: The path to the JSON schema file.\r\n\r\n__schemaObject__: A JSON object.\r\n\r\nThe database initlization must have a __schemaFile__ or a __schemaObject__.\r\n\r\nFrom here you can use all the transaction and executeSQL for your development.\r\n\r\n### Step 3a - Outputting the Database Schema\r\nIn the console type...\r\n\r\n``` js\r\ndbWebApp.outputSchema();\r\n```\r\n\r\nYour database schema will be stored in dbWebApp.schema. See index.html for functions that output the schema to the browser window.\r\n\r\n\r\nDBi is provided with the MIT license. Please submit an issue if you find any bugs that need to be squished or features you would like to see. Feel free to fork this repo. Please submit pull requests for any fixes, enhancements or new features.\r\n\r\n### Change Log\r\n2011-11-24 v0.2 Add the ability to pass a JSON object to DBi instead of a JSON file URL; improved index.html's JSON output function;\r\n\r\n2011-11-02 v0.1 Initial (alpha-betaish) release.","name":"DBi","note":"Don't delete this file! It's used internally to help with page regeneration."}